(()=>{"use strict";var __webpack_modules__={505:()=>{eval('\n;// CONCATENATED MODULE: ./src/storage.js\n// Save data to local storage\nfunction saveTasksToLocalStorage(tasksArr) {\n  const data = JSON.stringify(tasksArr);\n  localStorage.setItem("tasks", data);\n}\n\n// load tasks from localStorage and parse them back into JavaScript objects:\nfunction loadTasksFromLocalStorage() {\n  const data = localStorage.getItem("tasks");\n  if (data) {\n    return JSON.parse(data);\n  } else {\n    return []; // Return an empty array if no data is found\n  }\n}\n\n;// CONCATENATED MODULE: ./src/todayTasks.js\n\n\nfunction renderTodayTasks() {\n  const todayDiv = document.createElement("div");\n  todayDiv.classList.add("today-div");\n\n  const todayH1 = document.createElement("h1");\n  todayH1.textContent = "Today Tasks";\n\n  const allTasksContainer = document.createElement("div");\n  allTasksContainer.classList.add("all-tasks-container");\n\n  todayDiv.appendChild(todayH1);\n  todayDiv.appendChild(allTasksContainer);\n\n  displayTodayTasks();\n  return todayDiv;\n}\n\nfunction displayTodayTasks() {\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n\n  if (allTasksContainer) {\n    // if there are tasks in inbox\n    allTasksContainer.innerHTML = ""; // Clear previous content\n\n    const todayTasks = tasksArr.filter((task) => isDueToday(task.schedule));\n\n    if (todayTasks.length > 0) {\n      todayTasks.forEach((task) => {\n        const taskElement = createTodayTaskElement(task);\n        allTasksContainer.appendChild(taskElement);\n      });\n    } else {\n      // No tasks for today\n      const noTaskMessage = document.createElement("p");\n      noTaskMessage.textContent = "No tasks today!";\n      noTaskMessage.classList.add("no-task-msg");\n      allTasksContainer.appendChild(noTaskMessage);\n    }\n  }\n}\n\nfunction isDueToday(taskDate) {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  const dueDate = new Date(taskDate);\n  dueDate.setHours(0, 0, 0, 0);\n\n  return today.getTime() === dueDate.getTime();\n}\n\nfunction createTodayTaskElement(task) {\n  const taskContainer = document.createElement("div");\n  taskContainer.classList.add("task-container");\n\n  const taskTitle = document.createElement("p");\n  taskTitle.classList.add("task-title");\n  taskTitle.textContent = task.title;\n  taskContainer.appendChild(taskTitle);\n\n  return taskContainer;\n}\n\n;// CONCATENATED MODULE: ./src/projectManager.js\nfunction enableProjectAddition() {\n  const addProjectLink = document.querySelector(".add-project");\n\n  // Create the input container if it doesn\'t exist\n  let projectNameInputContainer = document.querySelector(\n    ".project-name-input-container",\n  );\n  if (!projectNameInputContainer) {\n    projectNameInputContainer = document.createElement("div");\n    projectNameInputContainer.classList.add("project-name-input-container");\n\n    const projectNameInput = document.createElement("input");\n    projectNameInput.type = "text";\n\n    // add and cancel buttons\n    const buttonsContainer = document.createElement("div");\n    buttonsContainer.classList.add("buttons-container");\n\n    const addBtn = document.createElement("button");\n    addBtn.textContent = "Add";\n    addBtn.classList.add("add-project-btn");\n\n    const cancelBtn = document.createElement("button");\n    cancelBtn.textContent = "Cancel";\n    cancelBtn.classList.add("cancel-adding-btn");\n\n    projectNameInputContainer.appendChild(projectNameInput);\n    buttonsContainer.appendChild(cancelBtn);\n    buttonsContainer.appendChild(addBtn);\n    projectNameInputContainer.appendChild(buttonsContainer);\n\n    // Append the container to the DOM\n    addProjectLink.after(projectNameInputContainer);\n\n    // Initially show the input container\n    projectNameInputContainer.style.display = "flex";\n\n    // Hide the container and clear the input when \'Cancel\' is clicked\n    cancelBtn.addEventListener("click", () => {\n      projectNameInputContainer.style.display = "none";\n      projectNameInput.value = "";\n    });\n\n    // Add the new project name when add project is clicked\n    addBtn.addEventListener("click", () => {\n      const projectsNamesContainer = document.createElement("div");\n      projectsNamesContainer.classList.add("projects-names-container");\n\n      const projectNameContainer = document.createElement("div");\n      projectNameContainer.classList.add("project-name-container");\n\n      const projectName = document.createElement("div");\n      const projectNameValue = projectNameInput.value.trim();\n      projectName.textContent = projectNameValue;\n      projectName.classList.add("project-name");\n      // add cross icon\n      const crossIcon = document.createElement("img");\n      crossIcon.src = "./images/icons8-cross-16.png";\n      crossIcon.alt = "cross";\n      crossIcon.classList.add("cross-icon");\n\n      crossIcon.addEventListener("click", () => {\n        projectsNamesContainer.removeChild(projectNameContainer);\n      });\n\n      projectNameContainer.appendChild(projectName);\n      projectNameContainer.appendChild(crossIcon);\n\n      projectsNamesContainer.appendChild(projectNameContainer);\n      addProjectLink.after(projectsNamesContainer);\n\n      projectNameInputContainer.style.display = "none";\n      projectNameInput.value = "";\n    });\n\n    // Add an event listener for the add project link\n    addProjectLink.addEventListener("click", () => {\n      projectNameInputContainer.style.display =\n        projectNameInputContainer.style.display === "none" ? "flex" : "none";\n    });\n  }\n}\n\n;// CONCATENATED MODULE: ./src/importantTasks.js\n\n\nfunction renderImportantTasks() {\n  const importantDiv = document.createElement("div");\n  importantDiv.classList.add("important-div");\n\n  const importantH1 = document.createElement("h1");\n  importantH1.textContent = "Important Tasks";\n\n  const allTasksContainer = document.createElement("div");\n  allTasksContainer.classList.add("all-tasks-container");\n\n  importantDiv.appendChild(importantH1);\n  importantDiv.appendChild(allTasksContainer);\n\n  return importantDiv;\n}\n\nfunction displayImportantTasks() {\n  // in the task array check for objects that their priority is high,\n  // if that so, add these tasks to tasks container in important div\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n\n  if (allTasksContainer) {\n    // Clear existing content\n    allTasksContainer.innerHTML = "";\n\n    // Loop through tasks and add high-priority tasks\n    tasksArr.forEach((task) => {\n      if (task.priority === "high") {\n        const importantTask = createImportantTaskElement(task);\n        allTasksContainer.appendChild(importantTask);\n      }\n    });\n  }\n}\n\nfunction createImportantTaskElement(task) {\n  const taskContainer = document.createElement("div");\n  taskContainer.classList.add("task-container");\n\n  const taskTitle = document.createElement("p");\n  taskTitle.classList.add("task-title");\n  taskTitle.textContent = task.title;\n  taskContainer.appendChild(taskTitle);\n\n  return taskContainer;\n}\n\n;// CONCATENATED MODULE: ./src/completedTasks.js\n\n\nfunction renderCompletedTasks() {\n  const completedDiv = document.createElement("div");\n  completedDiv.classList.add("completed-div");\n\n  const completedH1 = document.createElement("h1");\n  completedH1.textContent = "Completed Tasks";\n\n  const allTasksContainer = document.createElement("div");\n  allTasksContainer.classList.add("all-tasks-container");\n\n  completedDiv.appendChild(completedH1);\n  completedDiv.appendChild(allTasksContainer);\n\n  return completedDiv;\n}\n\nfunction displayCompletedTasks() {\n  // for each task check if the \'done\' is equal to true for showing it in the completed div\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n\n  if (allTasksContainer) {\n    // Clear existing content\n    allTasksContainer.innerHTML = "";\n\n    // Loop through tasks and add high-priority tasks\n    tasksArr.forEach((task) => {\n      if (task.done === true) {\n        const completedTask = createCompletedTaskElement(task);\n        allTasksContainer.appendChild(completedTask);\n      }\n    });\n  }\n}\n\nfunction createCompletedTaskElement(task) {\n  const taskContainer = document.createElement("div");\n  taskContainer.classList.add("task-container");\n\n  const taskTitle = document.createElement("p");\n  taskTitle.classList.add("task-title");\n  taskTitle.textContent = task.title;\n  taskContainer.appendChild(taskTitle);\n\n  return taskContainer;\n}\n\n;// CONCATENATED MODULE: ./src/UI.js\n\n\n\n\n\n\n\n\n\nfunction updateMainContent() {\n  const mainContent = document.querySelector(".main-content");\n\n  // Grab all sidebar links\n  const sidebarLinks = document.querySelectorAll(".sidebar a");\n\n  // Add an event listener to each link\n  sidebarLinks.forEach((link) => {\n    link.addEventListener("click", (event) => {\n      event.preventDefault(); // Prevent the default link action\n      // Clear the main content\n      mainContent.textContent = " ";\n\n      // Determine which function to call based on clicked link\'s class\n      if (link.classList.contains("inbox")) {\n        const inboxContent = renderInbox();\n        mainContent.appendChild(inboxContent);\n        createAndAddNewTask(); // by clicking add btn in dialog add the new task to tasksArr and the all tasks container in the inbox\n        attachEventListenersToTasksContainer(); // event listener delegation\n\n        if (tasksArr.length > 0) {\n          // if there is already some tasks added show them when navigate back to inbox link\n          renderNewTask();\n        }\n      } else if (link.classList.contains("today")) {\n        const todayContent = renderTodayTasks();\n        mainContent.appendChild(todayContent);\n        displayTodayTasks();\n      } else if (link.classList.contains("completed")) {\n        const completedContent = renderCompletedTasks();\n        mainContent.appendChild(completedContent);\n        displayCompletedTasks();\n      } else if (link.classList.contains("important")) {\n        const importantContent = renderImportantTasks();\n        mainContent.appendChild(importantContent);\n        displayImportantTasks();\n      } else if (link.classList.contains("add-project")) {\n        enableProjectAddition();\n      }\n    });\n  });\n}\n\n// DOM for to do list tasks\n\nfunction clearTasks() {\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n  allTasksContainer.innerHTML = "";\n}\n\nfunction createTaskElement(task) {\n  const taskContainer = document.createElement("div");\n  taskContainer.classList.add("task-container");\n  const taskStatusTitle = document.createElement("div");\n  taskStatusTitle.classList.add("task-status-title");\n  const taskDetails = document.createElement("div");\n  taskDetails.classList.add("task-details");\n\n  // add the status icon\n  const statusIcon = document.createElement("img");\n  statusIcon.classList.add("circle-icon", "task-icon");\n  statusIcon.src = "./images/circle_FILL0_wght400_GRAD0_opsz24.svg";\n  taskStatusTitle.appendChild(statusIcon);\n\n  // add task title\n  const taskTitle = document.createElement("p");\n  taskTitle.classList.add("task-title");\n  taskTitle.textContent = task.title;\n  taskStatusTitle.appendChild(taskTitle);\n\n  // add schedule\n  const schedule = document.createElement("span");\n  schedule.classList.add("schedule");\n  schedule.textContent = task.schedule;\n  taskDetails.appendChild(schedule);\n\n  // add priority\n  const priority = document.createElement("span");\n  priority.classList.add("priority");\n  priority.textContent = task.priority;\n  taskDetails.appendChild(priority);\n\n  // add trash icon\n\n  const trashIcon = document.createElement("img");\n  trashIcon.classList.add("trash-icon", "task-icon");\n  trashIcon.src = "./images/delete_FILL0_wght400_GRAD0_opsz24.svg";\n  taskDetails.appendChild(trashIcon);\n\n  taskContainer.appendChild(taskStatusTitle);\n  taskContainer.appendChild(taskDetails);\n\n  return taskContainer;\n}\n\nfunction addTaskToContainer(taskElement) {\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n  allTasksContainer.appendChild(taskElement);\n}\n\nfunction removeTaskFromContainer(taskElement) {\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n  allTasksContainer.removeChild(taskElement);\n}\n\nfunction toggleStatusIcon(task, taskElement) {\n  const statusIcon = taskElement.querySelector(".circle-icon");\n  task.done = !task.done;\n  const taskTitle = taskElement.querySelector(".task-title");\n\n  // Change the visual representation of the status icon\n  if (task.done) {\n    statusIcon.src = "images/check_circle_FILL0_wght400_GRAD0_opsz24.svg";\n    taskTitle.style.textDecoration = "line-through";\n  } else {\n    statusIcon.src = "./images/circle_FILL0_wght400_GRAD0_opsz24.svg";\n    taskTitle.style.textDecoration = "none";\n  }\n}\n\n;// CONCATENATED MODULE: ./src/toDoItem.js\n\n\n\n\nfunction renderNewTask() {\n  clearTasks(); // clear all tasks container so when adding a new task the previous tasks are not added again with the new one.\n\n  tasksArr.forEach((task) => {\n    const taskElement = createTaskElement(task);\n    updateTaskUI(task, taskElement);\n    addTaskToContainer(taskElement);\n  });\n}\n\nfunction updateTaskUI(task, taskElement) {\n  const statusIcon = taskElement.querySelector(".circle-icon");\n  const taskTitle = taskElement.querySelector(".task-title");\n\n  if (task.done) {\n    statusIcon.src = "images/check_circle_FILL0_wght400_GRAD0_opsz24.svg";\n    taskTitle.style.textDecoration = "line-through";\n  } else {\n    statusIcon.src = "./images/circle_FILL0_wght400_GRAD0_opsz24.svg";\n    taskTitle.style.textDecoration = "none";\n  }\n}\n\nfunction attachEventListenersToTasksContainer() {\n  const allTasksContainer = document.querySelector(".all-tasks-container");\n\n  allTasksContainer.addEventListener("click", (event) => {\n    const taskElement = event.target.closest(".task-container");\n    if (!taskElement) return;\n\n    if (event.target.classList.contains("circle-icon")) {\n      const index = Array.from(allTasksContainer.children).indexOf(taskElement);\n      toggleStatusIcon(tasksArr[index], taskElement);\n    } else if (event.target.classList.contains("trash-icon")) {\n      const index = Array.from(allTasksContainer.children).indexOf(taskElement);\n      removeTaskFromContainer(taskElement);\n      tasksArr.splice(index, 1);\n    }\n\n    // save the updated tasks array to local storage\n    saveTasksToLocalStorage(tasksArr);\n  });\n}\n\n;// CONCATENATED MODULE: ./src/inbox.js\n\n\n\nconst tasksArr = loadTasksFromLocalStorage();\n\nfunction renderInbox() {\n  const inboxDiv = document.createElement("div");\n  inboxDiv.classList.add("inbox-div");\n\n  const inboxH1 = document.createElement("h1");\n  inboxH1.textContent = "Inbox";\n\n  // all tasks container which is below the header and above the add new task div\n  const allTasksContainer = document.createElement("div");\n  allTasksContainer.classList.add("all-tasks-container");\n\n  const addNewTaskDiv = document.createElement("div");\n  addNewTaskDiv.classList.add("add-new-task");\n\n  const plusIcon = document.createElement("img");\n  plusIcon.src = "./images/add_FILL0_wght400_GRAD0_opsz24.svg";\n  plusIcon.classList.add("task-plus-icon");\n  plusIcon.alt = "plus";\n  addNewTaskDiv.appendChild(plusIcon);\n\n  const addTaskP = document.createElement("p");\n  addTaskP.classList.add("add-task-text");\n  addTaskP.textContent = "Add a new task";\n  addNewTaskDiv.appendChild(addTaskP);\n\n  inboxDiv.appendChild(inboxH1);\n  inboxDiv.appendChild(allTasksContainer);\n  inboxDiv.appendChild(addNewTaskDiv);\n\n  createAddTaskDialog();\n\n  return inboxDiv;\n}\n\nfunction createAddTaskDialog() {\n  // Create dialog element\n  const dialog = document.createElement("dialog");\n  dialog.classList.add("add-task-dialog");\n\n  // Create form\n  const form = document.createElement("form");\n  form.action = "dialog";\n\n  // Form inputs\n  const inputsDiv = document.createElement("div");\n  inputsDiv.classList.add("inputsDiv");\n\n  // label input div for each of inputs\n  const individualInput = document.createElement("div");\n  individualInput.classList.add("individual-input");\n\n  // Task title input\n  const taskTitleDiv = document.createElement("div");\n  taskTitleDiv.classList.add("task-title");\n  const taskTitleLabel = document.createElement("label");\n  taskTitleLabel.htmlFor = "task-title";\n  taskTitleLabel.textContent = "Task Title*";\n  const taskTitleInput = document.createElement("input");\n  taskTitleInput.type = "text";\n  taskTitleInput.name = "task-title";\n  taskTitleInput.id = "task-title";\n  taskTitleInput.classList.add("task-title--input");\n  taskTitleInput.placeholder = "e.g. Workout";\n  taskTitleInput.required = true;\n  taskTitleDiv.appendChild(taskTitleLabel);\n  taskTitleDiv.appendChild(taskTitleInput);\n\n  individualInput.appendChild(taskTitleDiv);\n\n  // Priority select\n  const priorityDiv = document.createElement("div");\n  priorityDiv.classList.add("priority");\n  const priorityLabel = document.createElement("label");\n  priorityLabel.htmlFor = "priority";\n  priorityLabel.textContent = "Priority";\n  const prioritySelect = document.createElement("select");\n  prioritySelect.name = "priority";\n  prioritySelect.id = "priority";\n\n  prioritySelect.classList.add("priority--select");\n  ["Low", "Medium", "High"].forEach((priority) => {\n    const option = document.createElement("option");\n    option.value = priority.toLowerCase();\n    option.textContent = priority;\n    prioritySelect.appendChild(option);\n  });\n  priorityDiv.appendChild(priorityLabel);\n  priorityDiv.appendChild(prioritySelect);\n\n  individualInput.appendChild(priorityDiv);\n\n  // Schedule date input\n  const scheduleDiv = document.createElement("div");\n  scheduleDiv.classList.add("schedule");\n  const scheduleLabel = document.createElement("label");\n  scheduleLabel.htmlFor = "schedule";\n  scheduleLabel.textContent = "Schedule";\n  const scheduleInput = document.createElement("input");\n  scheduleInput.type = "date";\n  scheduleInput.name = "schedule";\n  scheduleInput.id = "schedule";\n  scheduleInput.classList.add("due-date");\n  scheduleDiv.appendChild(scheduleLabel);\n  scheduleDiv.appendChild(scheduleInput);\n\n  individualInput.appendChild(scheduleDiv);\n\n  // Buttons\n  const buttonsDiv = document.createElement("div");\n  buttonsDiv.classList.add("buttons");\n  const cancelButton = document.createElement("button");\n  cancelButton.classList.add("cancel-btn");\n  cancelButton.textContent = "Cancel";\n  const addButton = document.createElement("button");\n  addButton.type = "submit";\n  addButton.classList.add("add-btn");\n  addButton.textContent = "Add";\n  buttonsDiv.appendChild(cancelButton);\n  buttonsDiv.appendChild(addButton);\n\n  // Append all inputs and their labels in inputsDiv\n  inputsDiv.appendChild(individualInput);\n\n  // Append all parts to form\n  form.appendChild(inputsDiv);\n  form.appendChild(buttonsDiv);\n\n  dialog.appendChild(form);\n\n  return dialog;\n}\n\nfunction createAndAddNewTask() {\n  // add the new task to the tasks container\n\n  const addNewTaskDiv = document.querySelector(".add-new-task");\n\n  // Attach the event listener to the .add-new-task div\n  addNewTaskDiv.addEventListener("click", () => {\n    const dialog = createAddTaskDialog();\n    document.body.appendChild(dialog);\n    dialog.showModal();\n\n    const cancelButton = dialog.querySelector(".cancel-btn");\n    const addButton = dialog.querySelector(".add-btn");\n\n    cancelButton.addEventListener("click", () => {\n      dialog.close();\n      document.body.removeChild(dialog); // removing the dialog after closing\n    });\n\n    addButton.addEventListener("click", (e) => {\n      e.preventDefault();\n\n      const title = dialog.querySelector("#task-title").value.trim();\n      const priority = dialog.querySelector("#priority").value;\n      const schedule = dialog.querySelector("#schedule").value;\n\n      if (!title) {\n        alert("Task title is required");\n        return;\n      }\n\n      // Handle the situation when the selected due time is in the past\n      const todayDate = new Date();\n      const dueDate = new Date(schedule);\n      todayDate.setHours(0, 0, 0, 0);\n      dueDate.setHours(0, 0, 0, 0);\n\n      if (todayDate > dueDate) {\n        alert("Please select a date in the future, not the past!");\n        return;\n      }\n\n      const newTask = {\n        title: title,\n        priority: priority,\n        schedule: schedule,\n        done: false,\n      };\n\n      tasksArr.push(newTask);\n\n      dialog.close();\n      document.body.removeChild(dialog);\n\n      // add the task to the UI when add button is clicked\n      renderNewTask();\n      // save the updated tasks array to local storage\n      saveTasksToLocalStorage(tasksArr);\n    });\n  });\n}\n\n;// CONCATENATED MODULE: ./src/initializeWebsite.js\n\n\n\n\n\nfunction createHeader() {\n  const header = document.createElement("header");\n\n  const headerLogo = document.createElement("img");\n  headerLogo.classList.add("logo");\n  headerLogo.src = "./images/todolist.svg";\n  headerLogo.alt = "logo";\n\n  const headerH1 = document.createElement("h1");\n  headerH1.textContent = "Todo List";\n\n  // add menu icon ( only be shown when on the mobile devices)\n  const menuIcon = document.createElement("img");\n  menuIcon.classList.add("menu-icon");\n  menuIcon.src = "./images/icons8-menu-24.svg";\n  menuIcon.alt = "menu";\n\n  header.appendChild(headerLogo);\n  header.appendChild(headerH1);\n  header.appendChild(menuIcon);\n\n  // Call checkWindowSize with menuIcon as a parameter\n  checkWindowSize(menuIcon);\n\n  return header;\n}\n\n// Modify checkWindowSize to accept the menuIcon as a parameter\nfunction checkWindowSize(menuIcon) {\n  if (window.innerWidth <= 768) {\n    menuIcon.style.display = "block";\n  } else {\n    menuIcon.style.display = "none";\n  }\n}\n\n// Update the event listener for window resize to also pass menuIcon\nwindow.addEventListener("resize", () => {\n  const menuIcon = document.querySelector("img.menu-icon");\n  checkWindowSize(menuIcon);\n});\n\nfunction createSidebar() {\n  const nav = document.createElement("nav");\n  const sidebar = document.createElement("div");\n  sidebar.classList.add("sidebar");\n\n  const sidebarItems = [\n    {\n      class: "inbox",\n      text: "Inbox",\n      imgSrc: "./images/inbox_FILL0_wght400_GRAD0_opsz24.svg",\n      altText: "inbox",\n    },\n    {\n      class: "today",\n      text: "Today",\n      imgSrc: "./images/today_FILL0_wght400_GRAD0_opsz24.svg",\n      altText: "today",\n    },\n    {\n      class: "important",\n      text: "Important",\n      imgSrc: "./images/stars_FILL0_wght400_GRAD0_opsz24.svg",\n      altText: "important",\n    },\n    {\n      class: "completed",\n      text: "Completed",\n      imgSrc: "./images/done_all_FILL0_wght400_GRAD0_opsz24.svg",\n      altText: "completed",\n    },\n    {\n      class: "add-project",\n      text: "Projects",\n      imgSrc: "./images/add_FILL0_wght400_GRAD0_opsz24.svg",\n      altText: "plus",\n    },\n  ];\n\n  // Loop through each sidebar item and create its elements\n  sidebarItems.forEach((item) => {\n    const anchor = document.createElement("a");\n    anchor.classList.add(item.class);\n\n    const img = document.createElement("img");\n    img.src = item.imgSrc;\n    img.alt = item.altText;\n    img.classList.add("navbar", "icon");\n\n    const p = document.createElement("p");\n    p.textContent = item.text;\n    p.classList.add(item.class);\n\n    if (item.class === "add-project") {\n      // Append the text before the icon\n      anchor.appendChild(p);\n      anchor.appendChild(img);\n    } else {\n      // Append the icon before the text\n      anchor.appendChild(img);\n      anchor.appendChild(p);\n    }\n    sidebar.appendChild(anchor);\n  });\n\n  nav.appendChild(sidebar);\n\n  return nav;\n}\n\nfunction createMain() {\n  const main = document.createElement("main");\n  main.classList.add("main-content");\n\n  return main;\n}\n\nfunction createFooter() {\n  const footer = document.createElement("footer");\n\n  const p = document.createElement("p");\n  p.textContent = "Copyright Â© 2024 ";\n\n  const a = document.createElement("a");\n  a.href = "https://github.com/zahrabateninia";\n  a.textContent = "zahrabateninia";\n  a.setAttribute("target", "_blank"); // Opens link in new tab\n\n  p.appendChild(a);\n\n  const img = document.createElement("img");\n  img.src = "images/github.svg";\n  img.alt = "github";\n\n  footer.appendChild(p);\n  footer.appendChild(img);\n\n  return footer;\n}\n\n// toggle sidebar\n\nfunction toggleSidebar() {\n  const menuIcon = document.querySelector(".menu-icon");\n  const sidebar = document.querySelector("nav");\n\n  menuIcon.addEventListener("click", function () {\n    // Toggle sidebar visibility\n    sidebar.style.left = sidebar.style.left === "0px" ? "-60%" : "0px";\n  });\n\n  document.addEventListener("click", function (event) {\n    // Check if the click is outside the sidebar\n    const isClickInsideSidebar = sidebar.contains(event.target);\n    const isClickOnMenuIcon = menuIcon.contains(event.target);\n\n    if (\n      !isClickInsideSidebar &&\n      !isClickOnMenuIcon &&\n      sidebar.style.left === "0px"\n    ) {\n      // Hide the sidebar if it\'s open and the click was outside\n      sidebar.style.left = "-60%";\n    }\n  });\n}\n\nfunction initializeWebsite() {\n  const wrapper = document.createElement("div");\n  wrapper.classList.add("wrapper");\n\n  const htmlContent = document.querySelector(".content");\n  htmlContent.appendChild(wrapper);\n\n  wrapper.appendChild(createHeader());\n  wrapper.appendChild(createSidebar());\n  toggleSidebar();\n  const mainContent = createMain();\n  wrapper.appendChild(mainContent);\n\n  // when the website is rendered, the inbox contents (with previous added tasks) are shown as a default \n  const inboxContent = renderInbox();\n  mainContent.appendChild(inboxContent);\n  if(tasksArr){\n    const data = loadTasksFromLocalStorage(); // tasks are stored in an array in data\n    // push the data(tasks) to the tasks container\n    data.forEach((task) =>{\n      renderNewTask()\n    })\n}\n  createAndAddNewTask(); \n  attachEventListenersToTasksContainer();\n\n  wrapper.appendChild(createFooter());\n\n  return wrapper;\n}\n\n;// CONCATENATED MODULE: ./src/index.js\n\n\n\ninitializeWebsite();\nupdateMainContent();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQzs7QUFFdEM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsV0FBVztBQUNsQztBQUNBLEtBQUssUUFBUTtBQUNiLGlCQUFpQix5QkFBeUIsSUFBSTtBQUM5QztBQUNBO0FBQ0EsTUFBTSxhQUFhO0FBQ25CLEtBQUs7QUFDTDtBQUNBLEVBQUUsbUJBQW1CO0FBQ3JCLEVBQUUsb0NBQW9DOztBQUV0Qzs7QUFFQTtBQUNBOzs7QUMxTW9EO0FBQ1g7O0FBRXpDLGlCQUFpQjtBQUNqQixpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcz80NjBhIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90b2RheVRhc2tzLmpzPzMyM2IiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RNYW5hZ2VyLmpzP2RkMmMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2ltcG9ydGFudFRhc2tzLmpzP2VjNGIiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NvbXBsZXRlZFRhc2tzLmpzPzYxNGQiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL1VJLmpzP2ExNjIiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3RvRG9JdGVtLmpzPzhmMDkiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luYm94LmpzP2VhMmUiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luaXRpYWxpemVXZWJzaXRlLmpzPzI3NGUiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2F2ZSBkYXRhIHRvIGxvY2FsIHN0b3JhZ2VcbmV4cG9ydCBmdW5jdGlvbiBzYXZlVGFza3NUb0xvY2FsU3RvcmFnZSh0YXNrc0Fycikge1xuICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodGFza3NBcnIpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRhc2tzXCIsIGRhdGEpO1xufVxuXG4vLyBsb2FkIHRhc2tzIGZyb20gbG9jYWxTdG9yYWdlIGFuZCBwYXJzZSB0aGVtIGJhY2sgaW50byBKYXZhU2NyaXB0IG9iamVjdHM6XG5leHBvcnQgZnVuY3Rpb24gbG9hZFRhc2tzRnJvbUxvY2FsU3RvcmFnZSgpIHtcbiAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGFza3NcIik7XG4gIGlmIChkYXRhKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdOyAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkgaWYgbm8gZGF0YSBpcyBmb3VuZFxuICB9XG59XG4iLCJpbXBvcnQgeyB0YXNrc0FyciB9IGZyb20gXCIuL2luYm94XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUb2RheVRhc2tzKCkge1xuICBjb25zdCB0b2RheURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRvZGF5RGl2LmNsYXNzTGlzdC5hZGQoXCJ0b2RheS1kaXZcIik7XG5cbiAgY29uc3QgdG9kYXlIMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgdG9kYXlIMS50ZXh0Q29udGVudCA9IFwiVG9kYXkgVGFza3NcIjtcblxuICBjb25zdCBhbGxUYXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGFsbFRhc2tzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhbGwtdGFza3MtY29udGFpbmVyXCIpO1xuXG4gIHRvZGF5RGl2LmFwcGVuZENoaWxkKHRvZGF5SDEpO1xuICB0b2RheURpdi5hcHBlbmRDaGlsZChhbGxUYXNrc0NvbnRhaW5lcik7XG5cbiAgZGlzcGxheVRvZGF5VGFza3MoKTtcbiAgcmV0dXJuIHRvZGF5RGl2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRvZGF5VGFza3MoKSB7XG4gIGNvbnN0IGFsbFRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdGFza3MtY29udGFpbmVyXCIpO1xuXG4gIGlmIChhbGxUYXNrc0NvbnRhaW5lcikge1xuICAgIC8vIGlmIHRoZXJlIGFyZSB0YXNrcyBpbiBpbmJveFxuICAgIGFsbFRhc2tzQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnRcblxuICAgIGNvbnN0IHRvZGF5VGFza3MgPSB0YXNrc0Fyci5maWx0ZXIoKHRhc2spID0+IGlzRHVlVG9kYXkodGFzay5zY2hlZHVsZSkpO1xuXG4gICAgaWYgKHRvZGF5VGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgdG9kYXlUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gY3JlYXRlVG9kYXlUYXNrRWxlbWVudCh0YXNrKTtcbiAgICAgICAgYWxsVGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0VsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIHRhc2tzIGZvciB0b2RheVxuICAgICAgY29uc3Qgbm9UYXNrTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgbm9UYXNrTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiTm8gdGFza3MgdG9kYXkhXCI7XG4gICAgICBub1Rhc2tNZXNzYWdlLmNsYXNzTGlzdC5hZGQoXCJuby10YXNrLW1zZ1wiKTtcbiAgICAgIGFsbFRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKG5vVGFza01lc3NhZ2UpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc0R1ZVRvZGF5KHRhc2tEYXRlKSB7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKHRhc2tEYXRlKTtcbiAgZHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICByZXR1cm4gdG9kYXkuZ2V0VGltZSgpID09PSBkdWVEYXRlLmdldFRpbWUoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVG9kYXlUYXNrRWxlbWVudCh0YXNrKSB7XG4gIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbnRhaW5lclwiKTtcblxuICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXRpdGxlXCIpO1xuICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xuICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgcmV0dXJuIHRhc2tDb250YWluZXI7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZW5hYmxlUHJvamVjdEFkZGl0aW9uKCkge1xuICBjb25zdCBhZGRQcm9qZWN0TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3RcIik7XG5cbiAgLy8gQ3JlYXRlIHRoZSBpbnB1dCBjb250YWluZXIgaWYgaXQgZG9lc24ndCBleGlzdFxuICBsZXQgcHJvamVjdE5hbWVJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIucHJvamVjdC1uYW1lLWlucHV0LWNvbnRhaW5lclwiLFxuICApO1xuICBpZiAoIXByb2plY3ROYW1lSW5wdXRDb250YWluZXIpIHtcbiAgICBwcm9qZWN0TmFtZUlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0TmFtZUlucHV0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LW5hbWUtaW5wdXQtY29udGFpbmVyXCIpO1xuXG4gICAgY29uc3QgcHJvamVjdE5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBwcm9qZWN0TmFtZUlucHV0LnR5cGUgPSBcInRleHRcIjtcblxuICAgIC8vIGFkZCBhbmQgY2FuY2VsIGJ1dHRvbnNcbiAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBidXR0b25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJidXR0b25zLWNvbnRhaW5lclwiKTtcblxuICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYWRkQnRuLnRleHRDb250ZW50ID0gXCJBZGRcIjtcbiAgICBhZGRCdG4uY2xhc3NMaXN0LmFkZChcImFkZC1wcm9qZWN0LWJ0blwiKTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LmFkZChcImNhbmNlbC1hZGRpbmctYnRuXCIpO1xuXG4gICAgcHJvamVjdE5hbWVJbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZUlucHV0KTtcbiAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEJ0bik7XG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRCdG4pO1xuICAgIHByb2plY3ROYW1lSW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7XG5cbiAgICAvLyBBcHBlbmQgdGhlIGNvbnRhaW5lciB0byB0aGUgRE9NXG4gICAgYWRkUHJvamVjdExpbmsuYWZ0ZXIocHJvamVjdE5hbWVJbnB1dENvbnRhaW5lcik7XG5cbiAgICAvLyBJbml0aWFsbHkgc2hvdyB0aGUgaW5wdXQgY29udGFpbmVyXG4gICAgcHJvamVjdE5hbWVJbnB1dENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAvLyBIaWRlIHRoZSBjb250YWluZXIgYW5kIGNsZWFyIHRoZSBpbnB1dCB3aGVuICdDYW5jZWwnIGlzIGNsaWNrZWRcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHByb2plY3ROYW1lSW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgcHJvamVjdE5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgdGhlIG5ldyBwcm9qZWN0IG5hbWUgd2hlbiBhZGQgcHJvamVjdCBpcyBjbGlja2VkXG4gICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0c05hbWVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHByb2plY3RzTmFtZXNDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3RzLW5hbWVzLWNvbnRhaW5lclwiKTtcblxuICAgICAgY29uc3QgcHJvamVjdE5hbWVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcHJvamVjdE5hbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3QtbmFtZS1jb250YWluZXJcIik7XG5cbiAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lVmFsdWUgPSBwcm9qZWN0TmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWVWYWx1ZTtcbiAgICAgIHByb2plY3ROYW1lLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LW5hbWVcIik7XG4gICAgICAvLyBhZGQgY3Jvc3MgaWNvblxuICAgICAgY29uc3QgY3Jvc3NJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgIGNyb3NzSWNvbi5zcmMgPSBcIi4vaW1hZ2VzL2ljb25zOC1jcm9zcy0xNi5wbmdcIjtcbiAgICAgIGNyb3NzSWNvbi5hbHQgPSBcImNyb3NzXCI7XG4gICAgICBjcm9zc0ljb24uY2xhc3NMaXN0LmFkZChcImNyb3NzLWljb25cIik7XG5cbiAgICAgIGNyb3NzSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBwcm9qZWN0c05hbWVzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHByb2plY3ROYW1lQ29udGFpbmVyKTtcbiAgICAgIH0pO1xuXG4gICAgICBwcm9qZWN0TmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICBwcm9qZWN0TmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcm9zc0ljb24pO1xuXG4gICAgICBwcm9qZWN0c05hbWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3ROYW1lQ29udGFpbmVyKTtcbiAgICAgIGFkZFByb2plY3RMaW5rLmFmdGVyKHByb2plY3RzTmFtZXNDb250YWluZXIpO1xuXG4gICAgICBwcm9qZWN0TmFtZUlucHV0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIHByb2plY3ROYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYWRkIHByb2plY3QgbGlua1xuICAgIGFkZFByb2plY3RMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBwcm9qZWN0TmFtZUlucHV0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICBwcm9qZWN0TmFtZUlucHV0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgdGFza3NBcnIgfSBmcm9tIFwiLi9pbmJveFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVySW1wb3J0YW50VGFza3MoKSB7XG4gIGNvbnN0IGltcG9ydGFudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGltcG9ydGFudERpdi5jbGFzc0xpc3QuYWRkKFwiaW1wb3J0YW50LWRpdlwiKTtcblxuICBjb25zdCBpbXBvcnRhbnRIMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgaW1wb3J0YW50SDEudGV4dENvbnRlbnQgPSBcIkltcG9ydGFudCBUYXNrc1wiO1xuXG4gIGNvbnN0IGFsbFRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYWxsVGFza3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFsbC10YXNrcy1jb250YWluZXJcIik7XG5cbiAgaW1wb3J0YW50RGl2LmFwcGVuZENoaWxkKGltcG9ydGFudEgxKTtcbiAgaW1wb3J0YW50RGl2LmFwcGVuZENoaWxkKGFsbFRhc2tzQ29udGFpbmVyKTtcblxuICByZXR1cm4gaW1wb3J0YW50RGl2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheUltcG9ydGFudFRhc2tzKCkge1xuICAvLyBpbiB0aGUgdGFzayBhcnJheSBjaGVjayBmb3Igb2JqZWN0cyB0aGF0IHRoZWlyIHByaW9yaXR5IGlzIGhpZ2gsXG4gIC8vIGlmIHRoYXQgc28sIGFkZCB0aGVzZSB0YXNrcyB0byB0YXNrcyBjb250YWluZXIgaW4gaW1wb3J0YW50IGRpdlxuICBjb25zdCBhbGxUYXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWxsLXRhc2tzLWNvbnRhaW5lclwiKTtcblxuICBpZiAoYWxsVGFza3NDb250YWluZXIpIHtcbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgYWxsVGFza3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIC8vIExvb3AgdGhyb3VnaCB0YXNrcyBhbmQgYWRkIGhpZ2gtcHJpb3JpdHkgdGFza3NcbiAgICB0YXNrc0Fyci5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBpZiAodGFzay5wcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcbiAgICAgICAgY29uc3QgaW1wb3J0YW50VGFzayA9IGNyZWF0ZUltcG9ydGFudFRhc2tFbGVtZW50KHRhc2spO1xuICAgICAgICBhbGxUYXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbXBvcnRhbnRUYXNrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVJbXBvcnRhbnRUYXNrRWxlbWVudCh0YXNrKSB7XG4gIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbnRhaW5lclwiKTtcblxuICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXRpdGxlXCIpO1xuICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xuICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgcmV0dXJuIHRhc2tDb250YWluZXI7XG59XG4iLCJpbXBvcnQgeyB0YXNrc0FyciB9IGZyb20gXCIuL2luYm94XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDb21wbGV0ZWRUYXNrcygpIHtcbiAgY29uc3QgY29tcGxldGVkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29tcGxldGVkRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWQtZGl2XCIpO1xuXG4gIGNvbnN0IGNvbXBsZXRlZEgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICBjb21wbGV0ZWRIMS50ZXh0Q29udGVudCA9IFwiQ29tcGxldGVkIFRhc2tzXCI7XG5cbiAgY29uc3QgYWxsVGFza3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBhbGxUYXNrc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYWxsLXRhc2tzLWNvbnRhaW5lclwiKTtcblxuICBjb21wbGV0ZWREaXYuYXBwZW5kQ2hpbGQoY29tcGxldGVkSDEpO1xuICBjb21wbGV0ZWREaXYuYXBwZW5kQ2hpbGQoYWxsVGFza3NDb250YWluZXIpO1xuXG4gIHJldHVybiBjb21wbGV0ZWREaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5Q29tcGxldGVkVGFza3MoKSB7XG4gIC8vIGZvciBlYWNoIHRhc2sgY2hlY2sgaWYgdGhlICdkb25lJyBpcyBlcXVhbCB0byB0cnVlIGZvciBzaG93aW5nIGl0IGluIHRoZSBjb21wbGV0ZWQgZGl2XG4gIGNvbnN0IGFsbFRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdGFza3MtY29udGFpbmVyXCIpO1xuXG4gIGlmIChhbGxUYXNrc0NvbnRhaW5lcikge1xuICAgIC8vIENsZWFyIGV4aXN0aW5nIGNvbnRlbnRcbiAgICBhbGxUYXNrc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRhc2tzIGFuZCBhZGQgaGlnaC1wcmlvcml0eSB0YXNrc1xuICAgIHRhc2tzQXJyLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGlmICh0YXNrLmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGVkVGFzayA9IGNyZWF0ZUNvbXBsZXRlZFRhc2tFbGVtZW50KHRhc2spO1xuICAgICAgICBhbGxUYXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjb21wbGV0ZWRUYXNrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wbGV0ZWRUYXNrRWxlbWVudCh0YXNrKSB7XG4gIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbnRhaW5lclwiKTtcblxuICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXRpdGxlXCIpO1xuICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xuICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgcmV0dXJuIHRhc2tDb250YWluZXI7XG59XG4iLCJpbXBvcnQgeyByZW5kZXJJbmJveCwgY3JlYXRlQW5kQWRkTmV3VGFzayB9IGZyb20gXCIuL2luYm94XCI7XG5pbXBvcnQgeyByZW5kZXJUb2RheVRhc2tzIH0gZnJvbSBcIi4vdG9kYXlUYXNrc1wiO1xuaW1wb3J0IHsgZW5hYmxlUHJvamVjdEFkZGl0aW9uIH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcbmltcG9ydCB7IGRpc3BsYXlUb2RheVRhc2tzIH0gZnJvbSBcIi4vdG9kYXlUYXNrc1wiO1xuaW1wb3J0IHsgZGlzcGxheUltcG9ydGFudFRhc2tzLCByZW5kZXJJbXBvcnRhbnRUYXNrcyB9IGZyb20gXCIuL2ltcG9ydGFudFRhc2tzXCI7XG5pbXBvcnQgeyBkaXNwbGF5Q29tcGxldGVkVGFza3MsIHJlbmRlckNvbXBsZXRlZFRhc2tzIH0gZnJvbSBcIi4vY29tcGxldGVkVGFza3NcIjtcbmltcG9ydCB7XG4gIGF0dGFjaEV2ZW50TGlzdGVuZXJzVG9UYXNrc0NvbnRhaW5lcixcbiAgcmVuZGVyTmV3VGFzayxcbn0gZnJvbSBcIi4vdG9Eb0l0ZW1cIjtcbmltcG9ydCB7IHRhc2tzQXJyIH0gZnJvbSBcIi4vaW5ib3hcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1haW5Db250ZW50KCkge1xuICBjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250ZW50XCIpO1xuXG4gIC8vIEdyYWIgYWxsIHNpZGViYXIgbGlua3NcbiAgY29uc3Qgc2lkZWJhckxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaWRlYmFyIGFcIik7XG5cbiAgLy8gQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGVhY2ggbGlua1xuICBzaWRlYmFyTGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBsaW5rIGFjdGlvblxuICAgICAgLy8gQ2xlYXIgdGhlIG1haW4gY29udGVudFxuICAgICAgbWFpbkNvbnRlbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGZ1bmN0aW9uIHRvIGNhbGwgYmFzZWQgb24gY2xpY2tlZCBsaW5rJ3MgY2xhc3NcbiAgICAgIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucyhcImluYm94XCIpKSB7XG4gICAgICAgIGNvbnN0IGluYm94Q29udGVudCA9IHJlbmRlckluYm94KCk7XG4gICAgICAgIG1haW5Db250ZW50LmFwcGVuZENoaWxkKGluYm94Q29udGVudCk7XG4gICAgICAgIGNyZWF0ZUFuZEFkZE5ld1Rhc2soKTsgLy8gYnkgY2xpY2tpbmcgYWRkIGJ0biBpbiBkaWFsb2cgYWRkIHRoZSBuZXcgdGFzayB0byB0YXNrc0FyciBhbmQgdGhlIGFsbCB0YXNrcyBjb250YWluZXIgaW4gdGhlIGluYm94XG4gICAgICAgIGF0dGFjaEV2ZW50TGlzdGVuZXJzVG9UYXNrc0NvbnRhaW5lcigpOyAvLyBldmVudCBsaXN0ZW5lciBkZWxlZ2F0aW9uXG5cbiAgICAgICAgaWYgKHRhc2tzQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbHJlYWR5IHNvbWUgdGFza3MgYWRkZWQgc2hvdyB0aGVtIHdoZW4gbmF2aWdhdGUgYmFjayB0byBpbmJveCBsaW5rXG4gICAgICAgICAgcmVuZGVyTmV3VGFzaygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9kYXlcIikpIHtcbiAgICAgICAgY29uc3QgdG9kYXlDb250ZW50ID0gcmVuZGVyVG9kYXlUYXNrcygpO1xuICAgICAgICBtYWluQ29udGVudC5hcHBlbmRDaGlsZCh0b2RheUNvbnRlbnQpO1xuICAgICAgICBkaXNwbGF5VG9kYXlUYXNrcygpO1xuICAgICAgfSBlbHNlIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucyhcImNvbXBsZXRlZFwiKSkge1xuICAgICAgICBjb25zdCBjb21wbGV0ZWRDb250ZW50ID0gcmVuZGVyQ29tcGxldGVkVGFza3MoKTtcbiAgICAgICAgbWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoY29tcGxldGVkQ29udGVudCk7XG4gICAgICAgIGRpc3BsYXlDb21wbGV0ZWRUYXNrcygpO1xuICAgICAgfSBlbHNlIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucyhcImltcG9ydGFudFwiKSkge1xuICAgICAgICBjb25zdCBpbXBvcnRhbnRDb250ZW50ID0gcmVuZGVySW1wb3J0YW50VGFza3MoKTtcbiAgICAgICAgbWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoaW1wb3J0YW50Q29udGVudCk7XG4gICAgICAgIGRpc3BsYXlJbXBvcnRhbnRUYXNrcygpO1xuICAgICAgfSBlbHNlIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1wcm9qZWN0XCIpKSB7XG4gICAgICAgIGVuYWJsZVByb2plY3RBZGRpdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gRE9NIGZvciB0byBkbyBsaXN0IHRhc2tzXG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRhc2tzKCkge1xuICBjb25zdCBhbGxUYXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWxsLXRhc2tzLWNvbnRhaW5lclwiKTtcbiAgYWxsVGFza3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2tFbGVtZW50KHRhc2spIHtcbiAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICBjb25zdCB0YXNrU3RhdHVzVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0YXNrU3RhdHVzVGl0bGUuY2xhc3NMaXN0LmFkZChcInRhc2stc3RhdHVzLXRpdGxlXCIpO1xuICBjb25zdCB0YXNrRGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRhc2tEZXRhaWxzLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWRldGFpbHNcIik7XG5cbiAgLy8gYWRkIHRoZSBzdGF0dXMgaWNvblxuICBjb25zdCBzdGF0dXNJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgc3RhdHVzSWNvbi5jbGFzc0xpc3QuYWRkKFwiY2lyY2xlLWljb25cIiwgXCJ0YXNrLWljb25cIik7XG4gIHN0YXR1c0ljb24uc3JjID0gXCIuL2ltYWdlcy9jaXJjbGVfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6MjQuc3ZnXCI7XG4gIHRhc2tTdGF0dXNUaXRsZS5hcHBlbmRDaGlsZChzdGF0dXNJY29uKTtcblxuICAvLyBhZGQgdGFzayB0aXRsZVxuICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXRpdGxlXCIpO1xuICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xuICB0YXNrU3RhdHVzVGl0bGUuYXBwZW5kQ2hpbGQodGFza1RpdGxlKTtcblxuICAvLyBhZGQgc2NoZWR1bGVcbiAgY29uc3Qgc2NoZWR1bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgc2NoZWR1bGUuY2xhc3NMaXN0LmFkZChcInNjaGVkdWxlXCIpO1xuICBzY2hlZHVsZS50ZXh0Q29udGVudCA9IHRhc2suc2NoZWR1bGU7XG4gIHRhc2tEZXRhaWxzLmFwcGVuZENoaWxkKHNjaGVkdWxlKTtcblxuICAvLyBhZGQgcHJpb3JpdHlcbiAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgcHJpb3JpdHkuY2xhc3NMaXN0LmFkZChcInByaW9yaXR5XCIpO1xuICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2sucHJpb3JpdHk7XG4gIHRhc2tEZXRhaWxzLmFwcGVuZENoaWxkKHByaW9yaXR5KTtcblxuICAvLyBhZGQgdHJhc2ggaWNvblxuXG4gIGNvbnN0IHRyYXNoSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIHRyYXNoSWNvbi5jbGFzc0xpc3QuYWRkKFwidHJhc2gtaWNvblwiLCBcInRhc2staWNvblwiKTtcbiAgdHJhc2hJY29uLnNyYyA9IFwiLi9pbWFnZXMvZGVsZXRlX0ZJTEwwX3dnaHQ0MDBfR1JBRDBfb3BzejI0LnN2Z1wiO1xuICB0YXNrRGV0YWlscy5hcHBlbmRDaGlsZCh0cmFzaEljb24pO1xuXG4gIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza1N0YXR1c1RpdGxlKTtcbiAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRGV0YWlscyk7XG5cbiAgcmV0dXJuIHRhc2tDb250YWluZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRUYXNrVG9Db250YWluZXIodGFza0VsZW1lbnQpIHtcbiAgY29uc3QgYWxsVGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbC10YXNrcy1jb250YWluZXJcIik7XG4gIGFsbFRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tFbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRhc2tGcm9tQ29udGFpbmVyKHRhc2tFbGVtZW50KSB7XG4gIGNvbnN0IGFsbFRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdGFza3MtY29udGFpbmVyXCIpO1xuICBhbGxUYXNrc0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0YXNrRWxlbWVudCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVTdGF0dXNJY29uKHRhc2ssIHRhc2tFbGVtZW50KSB7XG4gIGNvbnN0IHN0YXR1c0ljb24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNpcmNsZS1pY29uXCIpO1xuICB0YXNrLmRvbmUgPSAhdGFzay5kb25lO1xuICBjb25zdCB0YXNrVGl0bGUgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stdGl0bGVcIik7XG5cbiAgLy8gQ2hhbmdlIHRoZSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIHN0YXR1cyBpY29uXG4gIGlmICh0YXNrLmRvbmUpIHtcbiAgICBzdGF0dXNJY29uLnNyYyA9IFwiaW1hZ2VzL2NoZWNrX2NpcmNsZV9GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3oyNC5zdmdcIjtcbiAgICB0YXNrVGl0bGUuc3R5bGUudGV4dERlY29yYXRpb24gPSBcImxpbmUtdGhyb3VnaFwiO1xuICB9IGVsc2Uge1xuICAgIHN0YXR1c0ljb24uc3JjID0gXCIuL2ltYWdlcy9jaXJjbGVfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6MjQuc3ZnXCI7XG4gICAgdGFza1RpdGxlLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJub25lXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IHNhdmVUYXNrc1RvTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgdGFza3NBcnIgfSBmcm9tIFwiLi9pbmJveFwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlVGFza0VsZW1lbnQsXG4gIGFkZFRhc2tUb0NvbnRhaW5lcixcbiAgdG9nZ2xlU3RhdHVzSWNvbixcbiAgcmVtb3ZlVGFza0Zyb21Db250YWluZXIsXG4gIGNsZWFyVGFza3MsXG59IGZyb20gXCIuL1VJXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJOZXdUYXNrKCkge1xuICBjbGVhclRhc2tzKCk7IC8vIGNsZWFyIGFsbCB0YXNrcyBjb250YWluZXIgc28gd2hlbiBhZGRpbmcgYSBuZXcgdGFzayB0aGUgcHJldmlvdXMgdGFza3MgYXJlIG5vdCBhZGRlZCBhZ2FpbiB3aXRoIHRoZSBuZXcgb25lLlxuXG4gIHRhc2tzQXJyLmZvckVhY2goKHRhc2spID0+IHtcbiAgICBjb25zdCB0YXNrRWxlbWVudCA9IGNyZWF0ZVRhc2tFbGVtZW50KHRhc2spO1xuICAgIHVwZGF0ZVRhc2tVSSh0YXNrLCB0YXNrRWxlbWVudCk7XG4gICAgYWRkVGFza1RvQ29udGFpbmVyKHRhc2tFbGVtZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRhc2tVSSh0YXNrLCB0YXNrRWxlbWVudCkge1xuICBjb25zdCBzdGF0dXNJY29uID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaXJjbGUtaWNvblwiKTtcbiAgY29uc3QgdGFza1RpdGxlID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXRpdGxlXCIpO1xuXG4gIGlmICh0YXNrLmRvbmUpIHtcbiAgICBzdGF0dXNJY29uLnNyYyA9IFwiaW1hZ2VzL2NoZWNrX2NpcmNsZV9GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3oyNC5zdmdcIjtcbiAgICB0YXNrVGl0bGUuc3R5bGUudGV4dERlY29yYXRpb24gPSBcImxpbmUtdGhyb3VnaFwiO1xuICB9IGVsc2Uge1xuICAgIHN0YXR1c0ljb24uc3JjID0gXCIuL2ltYWdlcy9jaXJjbGVfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6MjQuc3ZnXCI7XG4gICAgdGFza1RpdGxlLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJub25lXCI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaEV2ZW50TGlzdGVuZXJzVG9UYXNrc0NvbnRhaW5lcigpIHtcbiAgY29uc3QgYWxsVGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbC10YXNrcy1jb250YWluZXJcIik7XG5cbiAgYWxsVGFza3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIudGFzay1jb250YWluZXJcIik7XG4gICAgaWYgKCF0YXNrRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjaXJjbGUtaWNvblwiKSkge1xuICAgICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKGFsbFRhc2tzQ29udGFpbmVyLmNoaWxkcmVuKS5pbmRleE9mKHRhc2tFbGVtZW50KTtcbiAgICAgIHRvZ2dsZVN0YXR1c0ljb24odGFza3NBcnJbaW5kZXhdLCB0YXNrRWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidHJhc2gtaWNvblwiKSkge1xuICAgICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKGFsbFRhc2tzQ29udGFpbmVyLmNoaWxkcmVuKS5pbmRleE9mKHRhc2tFbGVtZW50KTtcbiAgICAgIHJlbW92ZVRhc2tGcm9tQ29udGFpbmVyKHRhc2tFbGVtZW50KTtcbiAgICAgIHRhc2tzQXJyLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgLy8gc2F2ZSB0aGUgdXBkYXRlZCB0YXNrcyBhcnJheSB0byBsb2NhbCBzdG9yYWdlXG4gICAgc2F2ZVRhc2tzVG9Mb2NhbFN0b3JhZ2UodGFza3NBcnIpO1xuICB9KTtcbn1cbiIsImltcG9ydCB7IGxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UsIHNhdmVUYXNrc1RvTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgcmVuZGVyTmV3VGFzayB9IGZyb20gXCIuL3RvRG9JdGVtXCI7XG5cbmV4cG9ydCBjb25zdCB0YXNrc0FyciA9IGxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckluYm94KCkge1xuICBjb25zdCBpbmJveERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGluYm94RGl2LmNsYXNzTGlzdC5hZGQoXCJpbmJveC1kaXZcIik7XG5cbiAgY29uc3QgaW5ib3hIMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgaW5ib3hIMS50ZXh0Q29udGVudCA9IFwiSW5ib3hcIjtcblxuICAvLyBhbGwgdGFza3MgY29udGFpbmVyIHdoaWNoIGlzIGJlbG93IHRoZSBoZWFkZXIgYW5kIGFib3ZlIHRoZSBhZGQgbmV3IHRhc2sgZGl2XG4gIGNvbnN0IGFsbFRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYWxsVGFza3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFsbC10YXNrcy1jb250YWluZXJcIik7XG5cbiAgY29uc3QgYWRkTmV3VGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGFkZE5ld1Rhc2tEaXYuY2xhc3NMaXN0LmFkZChcImFkZC1uZXctdGFza1wiKTtcblxuICBjb25zdCBwbHVzSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIHBsdXNJY29uLnNyYyA9IFwiLi9pbWFnZXMvYWRkX0ZJTEwwX3dnaHQ0MDBfR1JBRDBfb3BzejI0LnN2Z1wiO1xuICBwbHVzSWNvbi5jbGFzc0xpc3QuYWRkKFwidGFzay1wbHVzLWljb25cIik7XG4gIHBsdXNJY29uLmFsdCA9IFwicGx1c1wiO1xuICBhZGROZXdUYXNrRGl2LmFwcGVuZENoaWxkKHBsdXNJY29uKTtcblxuICBjb25zdCBhZGRUYXNrUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBhZGRUYXNrUC5jbGFzc0xpc3QuYWRkKFwiYWRkLXRhc2stdGV4dFwiKTtcbiAgYWRkVGFza1AudGV4dENvbnRlbnQgPSBcIkFkZCBhIG5ldyB0YXNrXCI7XG4gIGFkZE5ld1Rhc2tEaXYuYXBwZW5kQ2hpbGQoYWRkVGFza1ApO1xuXG4gIGluYm94RGl2LmFwcGVuZENoaWxkKGluYm94SDEpO1xuICBpbmJveERpdi5hcHBlbmRDaGlsZChhbGxUYXNrc0NvbnRhaW5lcik7XG4gIGluYm94RGl2LmFwcGVuZENoaWxkKGFkZE5ld1Rhc2tEaXYpO1xuXG4gIGNyZWF0ZUFkZFRhc2tEaWFsb2coKTtcblxuICByZXR1cm4gaW5ib3hEaXY7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFkZFRhc2tEaWFsb2coKSB7XG4gIC8vIENyZWF0ZSBkaWFsb2cgZWxlbWVudFxuICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGlhbG9nXCIpO1xuICBkaWFsb2cuY2xhc3NMaXN0LmFkZChcImFkZC10YXNrLWRpYWxvZ1wiKTtcblxuICAvLyBDcmVhdGUgZm9ybVxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gIGZvcm0uYWN0aW9uID0gXCJkaWFsb2dcIjtcblxuICAvLyBGb3JtIGlucHV0c1xuICBjb25zdCBpbnB1dHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBpbnB1dHNEaXYuY2xhc3NMaXN0LmFkZChcImlucHV0c0RpdlwiKTtcblxuICAvLyBsYWJlbCBpbnB1dCBkaXYgZm9yIGVhY2ggb2YgaW5wdXRzXG4gIGNvbnN0IGluZGl2aWR1YWxJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGluZGl2aWR1YWxJbnB1dC5jbGFzc0xpc3QuYWRkKFwiaW5kaXZpZHVhbC1pbnB1dFwiKTtcblxuICAvLyBUYXNrIHRpdGxlIGlucHV0XG4gIGNvbnN0IHRhc2tUaXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRhc2tUaXRsZURpdi5jbGFzc0xpc3QuYWRkKFwidGFzay10aXRsZVwiKTtcbiAgY29uc3QgdGFza1RpdGxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIHRhc2tUaXRsZUxhYmVsLmh0bWxGb3IgPSBcInRhc2stdGl0bGVcIjtcbiAgdGFza1RpdGxlTGFiZWwudGV4dENvbnRlbnQgPSBcIlRhc2sgVGl0bGUqXCI7XG4gIGNvbnN0IHRhc2tUaXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICB0YXNrVGl0bGVJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gIHRhc2tUaXRsZUlucHV0Lm5hbWUgPSBcInRhc2stdGl0bGVcIjtcbiAgdGFza1RpdGxlSW5wdXQuaWQgPSBcInRhc2stdGl0bGVcIjtcbiAgdGFza1RpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZChcInRhc2stdGl0bGUtLWlucHV0XCIpO1xuICB0YXNrVGl0bGVJbnB1dC5wbGFjZWhvbGRlciA9IFwiZS5nLiBXb3Jrb3V0XCI7XG4gIHRhc2tUaXRsZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgdGFza1RpdGxlRGl2LmFwcGVuZENoaWxkKHRhc2tUaXRsZUxhYmVsKTtcbiAgdGFza1RpdGxlRGl2LmFwcGVuZENoaWxkKHRhc2tUaXRsZUlucHV0KTtcblxuICBpbmRpdmlkdWFsSW5wdXQuYXBwZW5kQ2hpbGQodGFza1RpdGxlRGl2KTtcblxuICAvLyBQcmlvcml0eSBzZWxlY3RcbiAgY29uc3QgcHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBwcmlvcml0eURpdi5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHlcIik7XG4gIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIHByaW9yaXR5TGFiZWwuaHRtbEZvciA9IFwicHJpb3JpdHlcIjtcbiAgcHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9IFwiUHJpb3JpdHlcIjtcbiAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICBwcmlvcml0eVNlbGVjdC5uYW1lID0gXCJwcmlvcml0eVwiO1xuICBwcmlvcml0eVNlbGVjdC5pZCA9IFwicHJpb3JpdHlcIjtcblxuICBwcmlvcml0eVNlbGVjdC5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktLXNlbGVjdFwiKTtcbiAgW1wiTG93XCIsIFwiTWVkaXVtXCIsIFwiSGlnaFwiXS5mb3JFYWNoKChwcmlvcml0eSkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnZhbHVlID0gcHJpb3JpdHkudG9Mb3dlckNhc2UoKTtcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBwcmlvcml0eTtcbiAgICBwcmlvcml0eVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICB9KTtcbiAgcHJpb3JpdHlEaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlMYWJlbCk7XG4gIHByaW9yaXR5RGl2LmFwcGVuZENoaWxkKHByaW9yaXR5U2VsZWN0KTtcblxuICBpbmRpdmlkdWFsSW5wdXQuYXBwZW5kQ2hpbGQocHJpb3JpdHlEaXYpO1xuXG4gIC8vIFNjaGVkdWxlIGRhdGUgaW5wdXRcbiAgY29uc3Qgc2NoZWR1bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzY2hlZHVsZURpdi5jbGFzc0xpc3QuYWRkKFwic2NoZWR1bGVcIik7XG4gIGNvbnN0IHNjaGVkdWxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIHNjaGVkdWxlTGFiZWwuaHRtbEZvciA9IFwic2NoZWR1bGVcIjtcbiAgc2NoZWR1bGVMYWJlbC50ZXh0Q29udGVudCA9IFwiU2NoZWR1bGVcIjtcbiAgY29uc3Qgc2NoZWR1bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgc2NoZWR1bGVJbnB1dC50eXBlID0gXCJkYXRlXCI7XG4gIHNjaGVkdWxlSW5wdXQubmFtZSA9IFwic2NoZWR1bGVcIjtcbiAgc2NoZWR1bGVJbnB1dC5pZCA9IFwic2NoZWR1bGVcIjtcbiAgc2NoZWR1bGVJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZHVlLWRhdGVcIik7XG4gIHNjaGVkdWxlRGl2LmFwcGVuZENoaWxkKHNjaGVkdWxlTGFiZWwpO1xuICBzY2hlZHVsZURpdi5hcHBlbmRDaGlsZChzY2hlZHVsZUlucHV0KTtcblxuICBpbmRpdmlkdWFsSW5wdXQuYXBwZW5kQ2hpbGQoc2NoZWR1bGVEaXYpO1xuXG4gIC8vIEJ1dHRvbnNcbiAgY29uc3QgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJ1dHRvbnNEaXYuY2xhc3NMaXN0LmFkZChcImJ1dHRvbnNcIik7XG4gIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGNhbmNlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FuY2VsLWJ0blwiKTtcbiAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgYWRkQnV0dG9uLnR5cGUgPSBcInN1Ym1pdFwiO1xuICBhZGRCdXR0b24uY2xhc3NMaXN0LmFkZChcImFkZC1idG5cIik7XG4gIGFkZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG4gIGJ1dHRvbnNEaXYuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcbiAgYnV0dG9uc0Rpdi5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuXG4gIC8vIEFwcGVuZCBhbGwgaW5wdXRzIGFuZCB0aGVpciBsYWJlbHMgaW4gaW5wdXRzRGl2XG4gIGlucHV0c0Rpdi5hcHBlbmRDaGlsZChpbmRpdmlkdWFsSW5wdXQpO1xuXG4gIC8vIEFwcGVuZCBhbGwgcGFydHMgdG8gZm9ybVxuICBmb3JtLmFwcGVuZENoaWxkKGlucHV0c0Rpdik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uc0Rpdik7XG5cbiAgZGlhbG9nLmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gIHJldHVybiBkaWFsb2c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbmRBZGROZXdUYXNrKCkge1xuICAvLyBhZGQgdGhlIG5ldyB0YXNrIHRvIHRoZSB0YXNrcyBjb250YWluZXJcblxuICBjb25zdCBhZGROZXdUYXNrRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtbmV3LXRhc2tcIik7XG5cbiAgLy8gQXR0YWNoIHRoZSBldmVudCBsaXN0ZW5lciB0byB0aGUgLmFkZC1uZXctdGFzayBkaXZcbiAgYWRkTmV3VGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGRpYWxvZyA9IGNyZWF0ZUFkZFRhc2tEaWFsb2coKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpYWxvZyk7XG4gICAgZGlhbG9nLnNob3dNb2RhbCgpO1xuXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLWJ0blwiKTtcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkaWFsb2cucXVlcnlTZWxlY3RvcihcIi5hZGQtYnRuXCIpO1xuXG4gICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkaWFsb2cuY2xvc2UoKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGlhbG9nKTsgLy8gcmVtb3ZpbmcgdGhlIGRpYWxvZyBhZnRlciBjbG9zaW5nXG4gICAgfSk7XG5cbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IHRpdGxlID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10aXRsZVwiKS52YWx1ZS50cmltKCk7XG4gICAgICBjb25zdCBwcmlvcml0eSA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpLnZhbHVlO1xuICAgICAgY29uc3Qgc2NoZWR1bGUgPSBkaWFsb2cucXVlcnlTZWxlY3RvcihcIiNzY2hlZHVsZVwiKS52YWx1ZTtcblxuICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICBhbGVydChcIlRhc2sgdGl0bGUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIHRoZSBzaXR1YXRpb24gd2hlbiB0aGUgc2VsZWN0ZWQgZHVlIHRpbWUgaXMgaW4gdGhlIHBhc3RcbiAgICAgIGNvbnN0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUoc2NoZWR1bGUpO1xuICAgICAgdG9kYXlEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgZHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgaWYgKHRvZGF5RGF0ZSA+IGR1ZURhdGUpIHtcbiAgICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGEgZGF0ZSBpbiB0aGUgZnV0dXJlLCBub3QgdGhlIHBhc3QhXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1Rhc2sgPSB7XG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5LFxuICAgICAgICBzY2hlZHVsZTogc2NoZWR1bGUsXG4gICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgdGFza3NBcnIucHVzaChuZXdUYXNrKTtcblxuICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpYWxvZyk7XG5cbiAgICAgIC8vIGFkZCB0aGUgdGFzayB0byB0aGUgVUkgd2hlbiBhZGQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAgIHJlbmRlck5ld1Rhc2soKTtcbiAgICAgIC8vIHNhdmUgdGhlIHVwZGF0ZWQgdGFza3MgYXJyYXkgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgc2F2ZVRhc2tzVG9Mb2NhbFN0b3JhZ2UodGFza3NBcnIpO1xuICAgIH0pO1xuICB9KTtcbn1cbiIsImltcG9ydCB7IHJlbmRlckluYm94LCBjcmVhdGVBbmRBZGROZXdUYXNrLCB0YXNrc0FyciB9IGZyb20gXCIuL2luYm94XCI7XG5pbXBvcnQgeyBhdHRhY2hFdmVudExpc3RlbmVyc1RvVGFza3NDb250YWluZXIsIHJlbmRlck5ld1Rhc2sgfSBmcm9tIFwiLi90b0RvSXRlbVwiO1xuaW1wb3J0IHsgbG9hZFRhc2tzRnJvbUxvY2FsU3RvcmFnZSB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuXG5mdW5jdGlvbiBjcmVhdGVIZWFkZXIoKSB7XG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoZWFkZXJcIik7XG5cbiAgY29uc3QgaGVhZGVyTG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGhlYWRlckxvZ28uY2xhc3NMaXN0LmFkZChcImxvZ29cIik7XG4gIGhlYWRlckxvZ28uc3JjID0gXCIuL2ltYWdlcy90b2RvbGlzdC5zdmdcIjtcbiAgaGVhZGVyTG9nby5hbHQgPSBcImxvZ29cIjtcblxuICBjb25zdCBoZWFkZXJIMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgaGVhZGVySDEudGV4dENvbnRlbnQgPSBcIlRvZG8gTGlzdFwiO1xuXG4gIC8vIGFkZCBtZW51IGljb24gKCBvbmx5IGJlIHNob3duIHdoZW4gb24gdGhlIG1vYmlsZSBkZXZpY2VzKVxuICBjb25zdCBtZW51SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIG1lbnVJY29uLmNsYXNzTGlzdC5hZGQoXCJtZW51LWljb25cIik7XG4gIG1lbnVJY29uLnNyYyA9IFwiLi9pbWFnZXMvaWNvbnM4LW1lbnUtMjQuc3ZnXCI7XG4gIG1lbnVJY29uLmFsdCA9IFwibWVudVwiO1xuXG4gIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXJMb2dvKTtcbiAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlckgxKTtcbiAgaGVhZGVyLmFwcGVuZENoaWxkKG1lbnVJY29uKTtcblxuICAvLyBDYWxsIGNoZWNrV2luZG93U2l6ZSB3aXRoIG1lbnVJY29uIGFzIGEgcGFyYW1ldGVyXG4gIGNoZWNrV2luZG93U2l6ZShtZW51SWNvbik7XG5cbiAgcmV0dXJuIGhlYWRlcjtcbn1cblxuLy8gTW9kaWZ5IGNoZWNrV2luZG93U2l6ZSB0byBhY2NlcHQgdGhlIG1lbnVJY29uIGFzIGEgcGFyYW1ldGVyXG5mdW5jdGlvbiBjaGVja1dpbmRvd1NpemUobWVudUljb24pIHtcbiAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OCkge1xuICAgIG1lbnVJY29uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIH0gZWxzZSB7XG4gICAgbWVudUljb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG59XG5cbi8vIFVwZGF0ZSB0aGUgZXZlbnQgbGlzdGVuZXIgZm9yIHdpbmRvdyByZXNpemUgdG8gYWxzbyBwYXNzIG1lbnVJY29uXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gIGNvbnN0IG1lbnVJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImltZy5tZW51LWljb25cIik7XG4gIGNoZWNrV2luZG93U2l6ZShtZW51SWNvbik7XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlU2lkZWJhcigpIHtcbiAgY29uc3QgbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm5hdlwiKTtcbiAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHNpZGViYXIuY2xhc3NMaXN0LmFkZChcInNpZGViYXJcIik7XG5cbiAgY29uc3Qgc2lkZWJhckl0ZW1zID0gW1xuICAgIHtcbiAgICAgIGNsYXNzOiBcImluYm94XCIsXG4gICAgICB0ZXh0OiBcIkluYm94XCIsXG4gICAgICBpbWdTcmM6IFwiLi9pbWFnZXMvaW5ib3hfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6MjQuc3ZnXCIsXG4gICAgICBhbHRUZXh0OiBcImluYm94XCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBjbGFzczogXCJ0b2RheVwiLFxuICAgICAgdGV4dDogXCJUb2RheVwiLFxuICAgICAgaW1nU3JjOiBcIi4vaW1hZ2VzL3RvZGF5X0ZJTEwwX3dnaHQ0MDBfR1JBRDBfb3BzejI0LnN2Z1wiLFxuICAgICAgYWx0VGV4dDogXCJ0b2RheVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgY2xhc3M6IFwiaW1wb3J0YW50XCIsXG4gICAgICB0ZXh0OiBcIkltcG9ydGFudFwiLFxuICAgICAgaW1nU3JjOiBcIi4vaW1hZ2VzL3N0YXJzX0ZJTEwwX3dnaHQ0MDBfR1JBRDBfb3BzejI0LnN2Z1wiLFxuICAgICAgYWx0VGV4dDogXCJpbXBvcnRhbnRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIGNsYXNzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgdGV4dDogXCJDb21wbGV0ZWRcIixcbiAgICAgIGltZ1NyYzogXCIuL2ltYWdlcy9kb25lX2FsbF9GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3oyNC5zdmdcIixcbiAgICAgIGFsdFRleHQ6IFwiY29tcGxldGVkXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBjbGFzczogXCJhZGQtcHJvamVjdFwiLFxuICAgICAgdGV4dDogXCJQcm9qZWN0c1wiLFxuICAgICAgaW1nU3JjOiBcIi4vaW1hZ2VzL2FkZF9GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3oyNC5zdmdcIixcbiAgICAgIGFsdFRleHQ6IFwicGx1c1wiLFxuICAgIH0sXG4gIF07XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggc2lkZWJhciBpdGVtIGFuZCBjcmVhdGUgaXRzIGVsZW1lbnRzXG4gIHNpZGViYXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgYW5jaG9yLmNsYXNzTGlzdC5hZGQoaXRlbS5jbGFzcyk7XG5cbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGltZy5zcmMgPSBpdGVtLmltZ1NyYztcbiAgICBpbWcuYWx0ID0gaXRlbS5hbHRUZXh0O1xuICAgIGltZy5jbGFzc0xpc3QuYWRkKFwibmF2YmFyXCIsIFwiaWNvblwiKTtcblxuICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwLnRleHRDb250ZW50ID0gaXRlbS50ZXh0O1xuICAgIHAuY2xhc3NMaXN0LmFkZChpdGVtLmNsYXNzKTtcblxuICAgIGlmIChpdGVtLmNsYXNzID09PSBcImFkZC1wcm9qZWN0XCIpIHtcbiAgICAgIC8vIEFwcGVuZCB0aGUgdGV4dCBiZWZvcmUgdGhlIGljb25cbiAgICAgIGFuY2hvci5hcHBlbmRDaGlsZChwKTtcbiAgICAgIGFuY2hvci5hcHBlbmRDaGlsZChpbWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBcHBlbmQgdGhlIGljb24gYmVmb3JlIHRoZSB0ZXh0XG4gICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgIGFuY2hvci5hcHBlbmRDaGlsZChwKTtcbiAgICB9XG4gICAgc2lkZWJhci5hcHBlbmRDaGlsZChhbmNob3IpO1xuICB9KTtcblxuICBuYXYuYXBwZW5kQ2hpbGQoc2lkZWJhcik7XG5cbiAgcmV0dXJuIG5hdjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTWFpbigpIHtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtYWluXCIpO1xuICBtYWluLmNsYXNzTGlzdC5hZGQoXCJtYWluLWNvbnRlbnRcIik7XG5cbiAgcmV0dXJuIG1haW47XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZvb3RlcigpIHtcbiAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvb3RlclwiKTtcblxuICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHAudGV4dENvbnRlbnQgPSBcIkNvcHlyaWdodCDCqSAyMDI0IFwiO1xuXG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgYS5ocmVmID0gXCJodHRwczovL2dpdGh1Yi5jb20vemFocmFiYXRlbmluaWFcIjtcbiAgYS50ZXh0Q29udGVudCA9IFwiemFocmFiYXRlbmluaWFcIjtcbiAgYS5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7IC8vIE9wZW5zIGxpbmsgaW4gbmV3IHRhYlxuXG4gIHAuYXBwZW5kQ2hpbGQoYSk7XG5cbiAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaW1nLnNyYyA9IFwiaW1hZ2VzL2dpdGh1Yi5zdmdcIjtcbiAgaW1nLmFsdCA9IFwiZ2l0aHViXCI7XG5cbiAgZm9vdGVyLmFwcGVuZENoaWxkKHApO1xuICBmb290ZXIuYXBwZW5kQ2hpbGQoaW1nKTtcblxuICByZXR1cm4gZm9vdGVyO1xufVxuXG4vLyB0b2dnbGUgc2lkZWJhclxuXG5mdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICBjb25zdCBtZW51SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1pY29uXCIpO1xuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm5hdlwiKTtcblxuICBtZW51SWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIC8vIFRvZ2dsZSBzaWRlYmFyIHZpc2liaWxpdHlcbiAgICBzaWRlYmFyLnN0eWxlLmxlZnQgPSBzaWRlYmFyLnN0eWxlLmxlZnQgPT09IFwiMHB4XCIgPyBcIi02MCVcIiA6IFwiMHB4XCI7XG4gIH0pO1xuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBDaGVjayBpZiB0aGUgY2xpY2sgaXMgb3V0c2lkZSB0aGUgc2lkZWJhclxuICAgIGNvbnN0IGlzQ2xpY2tJbnNpZGVTaWRlYmFyID0gc2lkZWJhci5jb250YWlucyhldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IGlzQ2xpY2tPbk1lbnVJY29uID0gbWVudUljb24uY29udGFpbnMoZXZlbnQudGFyZ2V0KTtcblxuICAgIGlmIChcbiAgICAgICFpc0NsaWNrSW5zaWRlU2lkZWJhciAmJlxuICAgICAgIWlzQ2xpY2tPbk1lbnVJY29uICYmXG4gICAgICBzaWRlYmFyLnN0eWxlLmxlZnQgPT09IFwiMHB4XCJcbiAgICApIHtcbiAgICAgIC8vIEhpZGUgdGhlIHNpZGViYXIgaWYgaXQncyBvcGVuIGFuZCB0aGUgY2xpY2sgd2FzIG91dHNpZGVcbiAgICAgIHNpZGViYXIuc3R5bGUubGVmdCA9IFwiLTYwJVwiO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRpYWxpemVXZWJzaXRlKCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwid3JhcHBlclwiKTtcblxuICBjb25zdCBodG1sQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKTtcbiAgaHRtbENvbnRlbnQuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cbiAgd3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVIZWFkZXIoKSk7XG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlU2lkZWJhcigpKTtcbiAgdG9nZ2xlU2lkZWJhcigpO1xuICBjb25zdCBtYWluQ29udGVudCA9IGNyZWF0ZU1haW4oKTtcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChtYWluQ29udGVudCk7XG5cbiAgLy8gd2hlbiB0aGUgd2Vic2l0ZSBpcyByZW5kZXJlZCwgdGhlIGluYm94IGNvbnRlbnRzICh3aXRoIHByZXZpb3VzIGFkZGVkIHRhc2tzKSBhcmUgc2hvd24gYXMgYSBkZWZhdWx0IFxuICBjb25zdCBpbmJveENvbnRlbnQgPSByZW5kZXJJbmJveCgpO1xuICBtYWluQ29udGVudC5hcHBlbmRDaGlsZChpbmJveENvbnRlbnQpO1xuICBpZih0YXNrc0Fycil7XG4gICAgY29uc3QgZGF0YSA9IGxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UoKTsgLy8gdGFza3MgYXJlIHN0b3JlZCBpbiBhbiBhcnJheSBpbiBkYXRhXG4gICAgLy8gcHVzaCB0aGUgZGF0YSh0YXNrcykgdG8gdGhlIHRhc2tzIGNvbnRhaW5lclxuICAgIGRhdGEuZm9yRWFjaCgodGFzaykgPT57XG4gICAgICByZW5kZXJOZXdUYXNrKClcbiAgICB9KVxufVxuICBjcmVhdGVBbmRBZGROZXdUYXNrKCk7IFxuICBhdHRhY2hFdmVudExpc3RlbmVyc1RvVGFza3NDb250YWluZXIoKTtcblxuICB3cmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUZvb3RlcigpKTtcblxuICByZXR1cm4gd3JhcHBlcjtcbn1cbiIsImltcG9ydCBpbml0aWFsaXplV2Vic2l0ZSBmcm9tIFwiLi9pbml0aWFsaXplV2Vic2l0ZVwiO1xuaW1wb3J0IHsgdXBkYXRlTWFpbkNvbnRlbnQgfSBmcm9tIFwiLi9VSVwiO1xuXG5pbml0aWFsaXplV2Vic2l0ZSgpO1xudXBkYXRlTWFpbkNvbnRlbnQoKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///505\n')}},__webpack_exports__={};__webpack_modules__[505]()})();